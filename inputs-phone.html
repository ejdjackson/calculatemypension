<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculate My Pension</title>
    <!-- Bootstrap CSS -->
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        
        
        .hidden {
            visibility: hidden !important;
            opacity: 0 !important;
            transform: translateY(-50px) !important;
            position: absolute !important;
            transition: opacity 1s ease, transform 1s ease !important;
        }

        .visible {
            visibility: visible;
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.5s ease, transform 0.5s ease;
            position: relative; /* Adjust as needed */
        }

        .three-way-toggle {
        display: flex;
        justify-content: space-between;
        align-items: center;
        /* width: 410px; */
        width: fit-content;
        height: 55px;
        background-color: #f0f0f0;
        border-radius: 15px;
        /* padding: 5px; */
        padding: 5px;
        position: relative;
        margin-left: 20px;
        margin-bottom: 20px;
        }

        .three-way-toggle input[type="radio"] {
        display: none;
        }

        .three-way-toggle label {
        flex: 1;
        text-align: center;
        width: fit-content;
        padding: 10px;
        cursor: pointer;
        transition: background-color 0.3s ease, color 0.3s ease;
        border-radius: 15px;
        }

        .three-way-toggle label:hover {
        background-color: #e0e0e0;
        }

        .three-way-toggle input[type="radio"]:checked + label {
        background-color:  #3e8e41;
        color: white;
        }

        /* Selected styles for Option 1 */
        .three-way-toggle input#option3:checked ~ .three-way-toggle {
        background-color: #4CAF50; /* Green background for Option 1 */
        }

        .three-way-toggle input#option3:checked + label {
        background-color: #4CAF50; /* Green label for Option 1 */
        color: white;
        }

        /* Selected styles for Option 2 */
        .three-way-toggle input#option1:checked ~ .three-way-toggle {
        background-color: #FF9800; /* Orange background for Option 2 */
        }

        .three-way-toggle input#option1:checked + label {
        background-color: #FF9800; /* Orange label for Option 2 */
        color: white;
        }

        /* Selected styles for Option 3 */
        .three-way-toggle input#option2:checked ~ .three-way-toggle {
        background-color: #2196F3; /* Blue background for Option 3 */
        }

        .three-way-toggle input#option2:checked + label {
        background-color: #2196F3; /* Blue label for Option 3 */
        color: white;
        }

        .result-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .result-label {
            
            margin-right: 10px;
        }
        .result-output {
            border: 1px solid #ddd;
            padding: 5px 10px;
            border-radius: 5px;
            width: 17vw;
            text-align: right;
            background-color: #f9f9f9;
        }
    </style>
    
   
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand d-flex align-items-center" href="navbar-icon.png">
                <div class="logo-icon me-2"></div>
                <span class="custom-navbar-text" style="padding-right: 15vh; overflow: hidden;">Calculate My Pension</span>
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link" href="inputs.html">Inputs</a></li>
                    <li class="nav-item"><a class="nav-link" href="calculator.html">Results</a></li>
                    <li class="nav-item"><a class="nav-link" href="FAQ.html">FAQs</a></li>
                    <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container mt-4">
       

        <!-- Accordion: Inputs -->
        <div class="accordion mb-4" id="inputsAccordion">
           <!--  <div class="accordion-item">
                <h2 class="accordion-header" id="headingInputs">
                    <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseInputs" aria-expanded="true" aria-controls="collapseInputs" >
                        Inputs
                    </button>
                </h2>
                <div id="collapseInputs" class="accordion-collapse collapse show" aria-labelledby="headingInputs"> -->
                    <div class="accordion-body">
                        <!-- Nested Accordion: Sections -->
                        <div class="accordion" id="userSectionsAccordion">
                            
                            <!-- Section: Your Current Situation -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingCurrentSituation">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCurrentSituation" aria-expanded="false" aria-controls="collapseCurrentSituation" >
                                        Your Current Situation
                                    </button>
                                </h2>
                                <div id="collapseCurrentSituation" class="accordion-collapse collapse" aria-labelledby="headingCurrentSituation" data-bs-parent="#userSectionsAccordion">
                                    <div class="accordion-body">
                                        <form>
                                            <div class="mb-3">
                                                <label for="currentAge" class="form-label">Current Age</label>
                                                <input type="number" class="form-control" id="currentAgePhone" placeholder="Enter your age">
                                            </div>
                                            <div class="mb-3">
                                                <label for="currentPensionFund" class="form-label">Current Pension Fund (£)</label>
                                                <input type="number" class="form-control" id="currentFundPhone" placeholder="Enter your current pension fund">
                                            </div>
                                            <div class="mb-3">
                                                <label for="currentISA" class="form-label">Current ISA Holdings (£)</label>
                                                <input type="number" class="form-control" id="currentISAPhone" placeholder="Enter your current ISA holdings">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Section: Future Contributions -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingFutureContributions">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFutureContributions" aria-expanded="false" aria-controls="collapseFutureContributions" >
                                        Future Contributions
                                    </button>
                                </h2>
                                <div id="collapseFutureContributions" class="accordion-collapse collapse" aria-labelledby="headingFutureContributions" data-bs-parent="#userSectionsAccordion">
                                    <div class="accordion-body">
                                        <form>
                                            <div class="mb-3">
                                                <label for="monthlyPensionContributions" class="form-label">Monthly Pension Contributions (£)</label>
                                                <input type="number" class="form-control" id="inputMonthlyContributionPhone" placeholder="Enter amount">
                                            </div>
                                            <div class="mb-3">
                                                <label for="monthlyISADeposits" class="form-label">Monthly ISA Deposits (£)</label>
                                                <input type="number" class="form-control" id="inputMonthlyISAContributionPhone" placeholder="Enter amount">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <!-- Section: Defined Benefit Pension -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingDefinedBenefit">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDefinedBenefit" aria-expanded="false" aria-controls="collapseDefinedBenefit" >
                                        Defined Benefit Pension
                                    </button>
                                </h2>
                                <div id="collapseDefinedBenefit" class="accordion-collapse collapse" aria-labelledby="headingDefinedBenefit" data-bs-parent="#userSectionsAccordion">
                                    <div class="accordion-body">
                                        <form>
                                            <div class="mb-3">
                                                <label for="annualPension" class="form-label">Annual Pension Amount (£)</label>
                                                <input type="number" class="form-control" id="dbPensionAmountPhone" placeholder="Enter amount">
                                            </div>
                                            <div class="mb-3">
                                                <label for="pensionPayableAge" class="form-label">Payable From Age</label>
                                                <input type="number" class="form-control" id="dbPensionAgePhone" placeholder="Enter age">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- End Nested Accordion -->

                        
                                        
                            <!-- Section: Your Retirement Income Goals -->
                            <div class="accordion-item">
                                <h2 class="accordion-header" id="headingRetirementGoals">
                                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRetirementGoals" aria-expanded="false" aria-controls="collapseRetirementGoals" >
                                        Your Retirement Income Goals
                                    </button>
                                </h2>
                                <div id="collapseRetirementGoals" class="accordion-collapse collapse" aria-labelledby="headingRetirementGoals" data-bs-parent="#userSectionsAccordion">
                                    <div class="accordion-body">
                                        <form>
                
                                           
                                            <div class="mb-3">
                                                
                                                <label class="form-label">The <a href="https://www.retirementlivingstandards.org.uk" target="_blank">Retirement Living Standards</a> website offers a practical framework to help you estimate the income needed for your desired lifestyle in retirement. Select a standard of living or enter your own desired retirement income.</label>
                                                <div class="three-way-toggle" id="livingStandardsTogglePhone">
                                                    <input type="radio" id="option1" name="togglePhone" value="Option 1" checked>
                                                    <label for="option1">  Minimum  </label>
                                                    
                                                    <input type="radio" id="option2" name="togglePhone" value="Option 2">
                                                    <label for="option2"> Moderate  </label>
                                                    
                                                    <input type="radio" id="option3" name="togglePhone" value="Option 3">
                                                    <label for="option3">Comfortable</label>
                                                </div>
                                                <label for="monthlyIncome" class="form-label">Desired Monthly Income (£)</label>
                                                <input type="number" class="form-control" id="inputDesiredIncomePhone" placeholder="Enter desired monthly income">
                                             
                                            </div>
                                            <div class="mb-3">
                                                <label for="retirementAge" class="form-label">Desired Retirement Age</label>
                                                <input type="number" class="form-control" id="inputRetirementAgePhone" placeholder="Enter desired retirement age">
                                            </div>
                                            <div class="mb-3">
                                                <label for="taxFreeLumpSum" class="form-label">Tax Free Cash Lump Sum (% of Fund)</label>
                                                <input type="number" class="form-control" id="inputTaxFreeCashPercentPhone" placeholder="Enter percentage">
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            
                        


                    </div>
             <!--    </div>
            </div> -->
        </div>


        


        

     <div class="d-flex justify-content-center mb-4">
            <button class="btn btn-success btn-lg mb-4"  style="background-color: #4CAF50; margin: 2%;"  onclick="saveAndCalc()">Calculate My Pension</button>
        </div>

    <!-- Results Section -->
    <div class="container mt-4">

        <div class="accordion-body">
            <!-- Nested Accordion: Results Sections -->
            <div class="accordion" id="resultsSectionsAccordion">
                <!-- Section: Fund Values -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingFundValues">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFundValues" aria-expanded="false" aria-controls="collapseFundValues" >
                            Fund Values
                        </button>
                    </h2>
                    <div id="collapseFundValues" class="accordion-collapse collapse" aria-labelledby="headingFundValues" data-bs-parent="#resultsSectionsAccordion">
                        <div class="accordion-body">
                            <div class="result-row">
                                <span class="result-label">Pension Fund at Retirement:</span>
                                <div id="pensionFundAtRetirementPhone" class="result-output"></div>
                            </div>
                            <div class="result-row">
                                <span class="result-label">ISA Holdings at Retirement:</span>
                                <div id="ISAHoldingsAtRetirementPhone" class="result-output"></div>
                            </div>
                            
                        </div>
                    </div>
                </div>
                <!-- Section: Income -->
                <div class="accordion-item">
                    <h2 class="accordion-header" id="headingIncome">
                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIncome" aria-expanded="false" aria-controls="collapseIncome" >
                            Income
                        </button>
                    </h2>
                    <div id="collapseIncome" class="accordion-collapse collapse" aria-labelledby="headingIncome" data-bs-parent="#resultsSectionsAccordion">
                        
                        

                        <div class="accordion-body">
                            <div class="result-row">
                                <span class="result-label">What You Can Afford:</span>
                                <div id="expectedTotalIncomeTodaysMoneyPhone" class="result-output"></div>
                            </div>
                            <div class="result-row">
                                <span class="result-label" id="desiredMonthlyIncomeAtRetirementTextPhone">What You Need:</span>
                                <div id="desiredMonthlyIncomeAtRetirementPhone" class="result-output"></div>
                            </div>
                            <div class="result-row">
                                <span class="result-label" id="shortfallAtRetirementTextPhone"><strong>Shortfall:</strong></span>
                                <div id="shortfallAtRetirementPhone" class="result-output"></div>
                            </div>
                                                                    
                        </div>

                        <div class="container mt-3">
                            
                            <!-- Yearly/Monthly Switch -->
                            <div class="d-flex justify-content-between align-items-center mb-3 p-2">
                                <label class="form-check-label me-3" for="yearlyMonthlySwitch">Monthly / Yearly</label>
                                <div class="form-check form-switch ms-auto pe-2">
                                    <input class="form-check-input" type="checkbox" id="frequencySlider" onchange="toggleIncomePeriod(this)">
                                </div>
                            </div>
                            <!-- Future Values/In Today's Money Switch -->
                            <div class="d-flex justify-content-between align-items-center mb-3 p-2">
                                <label class="form-check-label me-3" for="futurePresentSwitch">Future Values / In Today's Money</label>
                                <div class="form-check form-switch ms-auto pe-2">
                                    <input class="form-check-input" type="checkbox" id="applyInflationAdjustmentPhone" onchange="toggleValuePerspective(this)">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- End Nested Accordion -->
        </div>

    </div> 

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="model.js"></script>
    <script src="input-listeners-phone.js"></script>
    <script>

        // Get all input fields - THIS LISTENS FOR ANY CLICKS
        var inputFields = document.querySelectorAll('input');

        // Add event listeners to hide results on input change
      /*   inputFields.forEach(function(input) {
                input.addEventListener('input', saveAndCalc());
            }
        ); */

        function saveAndCalc() {
            
            saveToLocalStorage("planAsCouple", false);
            saveAllInputsToLocalStoragePhone(); 
            validateInputs(false,false,true);   //planAsCouple,AlreadyRetired,phoneFormat
            calculateMyPension(true);
            showResults();

        }

        function showResults() {
            const resultsSection = document.getElementById("resultsSection");
            resultsSection.classList.remove("d-none");
        }

        function selectOption(option) {
            // Get all toggle options
            const toggleOptions = document.querySelectorAll('.toggle-option');

            // Remove 'active' class from all options
            toggleOptions.forEach(optionElement => optionElement.classList.remove('active'));

            // Add 'active' class to the selected option
            const selectedElement = document.querySelector(`.toggle-option.${option}`);
            selectedElement.classList.add('active');

            // Update the displayed selected option
            const selectedOptionDisplay = document.getElementById('selectedOption');
            selectedOptionDisplay.textContent = option.charAt(0).toUpperCase() + option.slice(1);
        }


        function toggleIncomePeriod(switchElement) {
            saveAndCalc();
            if (switchElement.checked) {
                console.log("Switched to Monthly Income");
            } else {
                console.log("Switched to Yearly Income");
            }
        }

        function toggleValuePerspective(switchElement) {
            saveAndCalc();
            if (switchElement.checked) {
                console.log("Switched to Future Values");
            } else {
                console.log("Switched to In Today's Money");
            }
        }

    </script>
    
</body>
</html>
